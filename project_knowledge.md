このファイルは、AIがプロジェクトの構造、開発ルール、特定の技術的課題とその解決策、およびユーザーからの指示やフィードバックを通じて得られた重要な知見を永続的に記憶するためのものです。これにより、AIは一貫性のある、より効率的で正確な作業を提供し、プロジェクトの慣習を遵守することができます。

# AIルール

## エラーが出た場合絶対守るルール
ソースコードの提示は絶対にしないでください。まずはエラーがなぜ起きているのかを説明してください。それたいして人間が多方面からの矛盾点についていろいろ質問します。これにより多方面からエラーの解決策を絞ります。それからコードを生成するように指示をします。それまではソースコードを書かないようにお願いします。

## 1. 徹底的な原因究明の重要性
エラーやトラブルに直面した際、その根本原因を徹底的に追及することが、正確かつ効果的な修正を行うための唯一の道である。安易な推測や表面的な情報に基づく判断は、誤った修正やさらなる問題を引き起こす可能性がある。

## 2. ユーザーの指示と情報の尊重
ユーザーからの指示や提供される情報は、問題解決の最も重要な手がかりである。最後まで注意深く耳を傾け、すべての情報を完全に理解するまで、いかなる予測や行動も控えるべきである。ユーザーの意図を汲み取らずに早とちりすることは、信頼を損ね、作業を非効率にする。

## 3. 予測と早とちりの排除
問題の全体像が把握できていない段階での予測や、ユーザーの指示を待たずに勝手に行動することは、誤った方向へ進む典型的な原因となる。常に冷静に状況を分析し、必要な情報が揃うまで待機する忍耐力が求められる。

## 4. 今後の改善点
- 問題発生時は、まずユーザーからの情報提供を最優先し、最後まで注意深く聞く。
- エラーメッセージやログなど、具体的な証拠に基づいて原因を徹底的に分析する。
- ユーザーからの明確な指示がない限り、いかなるコード修正やシステム変更も行わない。
- 常にユーザーとの対話を重視し、理解の齟齬がないか確認しながら作業を進める。

# Firebase データ管理ルール

## 1. 認証ユーザーの管理
Google Workspace で会社管理されている環境において、アプリケーションの認証ユーザーは Firebase 管理画面の Firestore Database で管理されます。

### 設定方法
1. Firestore Database に `authorizedUsers` コレクションが存在することを確認します。
2. `authorizedUsers` コレクションに新しいドキュメントを追加します。
3. ドキュメントIDには、許可するユーザーの **ユーザーUID** を設定します。
4. ドキュメント内に以下のフィールドを追加します。
   - **フィールド名**: `placeholder`
   - **タイプ**: `boolean`
   - **値**: `true`

この設定により、`firestore.rules` で定義されている `isAuthorizedUser()` 関数が正しく機能し、指定されたユーザーのみがアプリケーションを利用できるようになります。

# アプリケーションの主要ファイル

## 1. `index.html`
アプリケーションのメインとなるHTMLファイルです。UIの骨格を定義し、CSS (`style.css`) とJavaScript (`script.js`) を読み込んでいます。

## 2. `script.js`
アプリケーションの主要なロジックを記述したJavaScriptファイルです。Firebaseとの連携、データの読み書き、UIの動的な更新、イベントハンドリングなど、ほとんどの機能がこのファイルに実装されています。

## 3. `style.css`
アプリケーションのスタイルを定義するCSSファイルです。Tailwind CSSも使用されていますが、このファイルではカスタムスタイルやTailwind CSSでカバーしきれない部分の調整が行われています。

# Firebase CLI (Command Line Interface)

Firebase CLI は、Firebase プロジェクトを管理するためのコマンドラインツールです。以下の操作などで使用されます。

- Firebase プロジェクトの初期化と設定
- Firestore Security Rules のデプロイ
- Hosting へのデプロイ
- Functions のデプロイ
- データのインポート/エクスポート

このツールを使用することで、開発者はローカル環境からFirebaseプロジェクトを効率的に操作できます。
